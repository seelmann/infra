---

- name: Create temp directory
  file: path=/tmp/{{inventory_hostname}} state=directory
  delegate_to: "{{hypervisor}}"

- name: Copy network definition file
  template: src=network.j2 dest=/tmp/{{inventory_hostname}}/network.xml
  delegate_to: "{{hypervisor}}"

- name: Define network
  command: virsh net-define /tmp/{{inventory_hostname}}/network.xml
  delegate_to: "{{hypervisor}}"

- name: Start network
  command: virsh net-start {{inventory_hostname}}
  delegate_to: "{{hypervisor}}"

- name: Autostart network
  command: virsh net-autostart {{inventory_hostname}}
  delegate_to: "{{hypervisor}}"

